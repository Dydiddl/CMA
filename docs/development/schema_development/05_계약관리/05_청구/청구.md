# 청구 관리 시스템

## 시스템 개요
이 문서는 청구 관리의 구조와 기능을 정의합니다.
청구 정보 관리, 청구 진행 관리, 청구 이력 관리 등을 관리합니다.

## 주요 기능

### 1. 청구 정보 관리
청구의 기본 정보를 관리합니다.
- 청구 등록: 새로운 청구 등록
- 정보 수정: 청구 정보 변경
- 정보 조회: 청구 정보 조회
- 이력 관리: 청구 정보 변경 이력 관리

### 2. 청구 진행 관리
청구의 진행 상황을 관리합니다.
- 진행 등록: 청구 진행 등록
- 진행 수정: 진행 정보 변경
- 진행 조회: 진행 목록 조회
- 진행 분석: 진행 상황 분석

### 3. 청구 문서 관리
청구 관련 문서를 관리합니다.
- 문서 등록: 청구 문서 등록
- 문서 수정: 문서 정보 변경
- 문서 조회: 문서 목록 조회
- 문서 보관: 문서 보관 관리

## DB 연계
```sql
-- 청구 테이블: 청구의 기본 정보를 저장합니다.
CREATE TABLE claims (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    contract_id UUID REFERENCES contracts(id),
    name VARCHAR(100) NOT NULL,
    claim_date DATE NOT NULL,
    amount DECIMAL(15,2) NOT NULL,
    account_id UUID, -- 입금계좌 정보
    status VARCHAR(50) NOT NULL,
    description TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- 청구 문서 테이블: 청구 관련 문서 정보를 저장합니다.
CREATE TABLE claim_documents (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    claim_id UUID REFERENCES claims(id),
    name VARCHAR(100) NOT NULL,
    document_type VARCHAR(50) NOT NULL,
    file_path TEXT NOT NULL,
    version VARCHAR(20),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- 청구 이력 테이블: 청구 정보 변경 사항을 추적합니다.
CREATE TABLE claim_history (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    claim_id UUID REFERENCES claims(id),
    action_type VARCHAR(50) NOT NULL,
    previous_data JSONB,
    new_data JSONB,
    changed_by UUID REFERENCES users(id),
    changed_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

## 청구 구조
1. 청구 제출 서류
   - 청구서
   - 세금계산서
   - 입금계좌 지정서
   - 지급확인서

2. 청구 단계 주요 정보
   - 공사명
   - 계약번호
   - 청구일
   - 청구금액
   - 세금계산서발행 여부 및 일자
   - 입금계좌
   - 청구 관련 비고

## 운영 정책
1. 청구 관리
   - 청구 등록 절차
   - 청구 변경 절차
   - 청구 종료 절차

2. 진행 관리
   - 진행 상황 보고
   - 지연 관리 방안
   - 리스크 관리

3. 문서 관리
   - 문서 보관 기간
   - 문서 접근 권한
   - 문서 보안 정책 