# 분점 관리 시스템

## 시스템 개요
이 문서는 회사의 분점 관리 구조와 기능을 정의합니다.
분점 정보 관리, 운영 관리, 인력 관리, 실적 관리 등을 관리합니다.

## 주요 기능

### 1. 분점 정보 관리
분점의 기본 정보를 관리합니다.
- 분점 등록: 새로운 분점 등록
- 정보 수정: 분점 정보 변경
- 정보 조회: 분점 정보 조회
- 이력 관리: 정보 변경 이력 관리

### 2. 운영 관리
분점의 운영을 관리합니다.
- 예산 관리: 분점 예산 운영
- 실적 관리: 분점 실적 관리
- 자산 관리: 분점 자산 관리
- 시설 관리: 분점 시설 관리

### 3. 인력 관리
분점 인력을 관리합니다.
- 인력 배치: 분점 인력 배치
- 인력 이동: 인력 배치 변경
- 인력 조회: 분점 인력 조회
- 인력 통계: 인력 현황 통계

### 4. 실적 관리
분점의 실적을 관리합니다.
- 실적 등록: 분점 실적 등록
- 실적 수정: 실적 정보 변경
- 실적 조회: 실적 목록 조회
- 실적 분석: 실적 통계 분석

## DB 연계
```sql
-- 분점 테이블: 분점의 기본 정보를 저장합니다.
-- 예: 분점명, 주소, 연락처, 분점장 등의 정보를 관리합니다.
CREATE TABLE branches (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),  -- 분점의 고유 식별자
    name VARCHAR(100) NOT NULL,                      -- 분점명
    code VARCHAR(50) UNIQUE NOT NULL,                -- 분점 코드
    address TEXT NOT NULL,                           -- 주소
    phone VARCHAR(20),                               -- 전화번호
    email VARCHAR(100),                              -- 이메일
    manager_id UUID REFERENCES users(id),            -- 분점장 ID
    status VARCHAR(50) NOT NULL,                     -- 상태
    description TEXT,                                -- 설명
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,  -- 생성 일시
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP   -- 수정 일시
);

-- 분점 상세 정보 테이블: 분점의 추가 정보를 저장합니다.
-- 예: 분점 규모, 업종, 주요 사업 등을 관리합니다.
CREATE TABLE branch_details (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),  -- 상세 정보의 고유 식별자
    branch_id UUID REFERENCES branches(id),          -- 분점 ID
    business_type VARCHAR(100),                      -- 사업 유형
    employee_count INTEGER,                          -- 직원 수
    annual_target DECIMAL(15,2),                     -- 연간 목표
    main_business TEXT,                              -- 주요 사업
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,  -- 생성 일시
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP   -- 수정 일시
);

-- 분점 인력 테이블: 분점 인력 정보를 저장합니다.
-- 예: 인력 배치, 직위, 부서 등을 관리합니다.
CREATE TABLE branch_personnel (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),  -- 인력의 고유 식별자
    branch_id UUID REFERENCES branches(id),          -- 분점 ID
    user_id UUID REFERENCES users(id),               -- 사용자 ID
    position VARCHAR(100),                           -- 직위
    department VARCHAR(100),                         -- 부서
    start_date DATE NOT NULL,                        -- 배치 시작일
    end_date DATE,                                   -- 배치 종료일
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,  -- 생성 일시
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP   -- 수정 일시
);

-- 분점 실적 테이블: 분점 실적 정보를 저장합니다.
-- 예: 실적명, 금액, 달성률 등을 관리합니다.
CREATE TABLE branch_performance (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),  -- 실적의 고유 식별자
    branch_id UUID REFERENCES branches(id),          -- 분점 ID
    name VARCHAR(100) NOT NULL,                      -- 실적명
    amount DECIMAL(15,2) NOT NULL,                   -- 금액
    target_amount DECIMAL(15,2) NOT NULL,            -- 목표 금액
    achievement_rate DECIMAL(5,2),                   -- 달성률
    period VARCHAR(50) NOT NULL,                     -- 기간
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,  -- 생성 일시
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP   -- 수정 일시
);

-- 분점 이력 테이블: 분점 정보 변경 사항을 추적합니다.
-- 예: 분점명 변경, 분점장 변경, 상태 변경 등의 이력을 관리합니다.
CREATE TABLE branch_history (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),  -- 이력의 고유 식별자
    branch_id UUID REFERENCES branches(id),          -- 분점 ID
    action_type VARCHAR(50) NOT NULL,                -- 작업 유형 (생성/수정/삭제)
    previous_data JSONB,                             -- 변경 전 데이터
    new_data JSONB,                                  -- 변경 후 데이터
    changed_by UUID REFERENCES users(id),            -- 변경 수행자 ID
    changed_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP  -- 변경 일시
);
```

## 분점 구조
1. 분점 유형
   - 영업 분점: 영업 활동
   - 시공 분점: 시공 관리
   - 관리 분점: 행정 관리
   - 특수 분점: 특수 목적

2. 분점 조직
   - 분점장: 분점 총괄
   - 영업팀: 영업 활동
   - 시공팀: 시공 관리
   - 행정팀: 행정 업무

3. 분점 시설
   - 사무실: 분점 사무실
   - 창고: 자재 창고
   - 작업장: 작업 공간
   - 휴게실: 직원 휴게 공간

## 운영 정책
1. 분점 관리
   - 분점 운영 규정
   - 예산 관리 규정
   - 자산 관리 규정

2. 인력 관리
   - 인력 배치 기준
   - 교육 훈련 계획
   - 평가 보상 체계

3. 실적 관리
   - 실적 목표 설정
   - 실적 평가 기준
   - 실적 보상 체계

4. 보고 체계
   - 일일 보고
   - 주간 보고
   - 월간 보고
   - 연간 보고 