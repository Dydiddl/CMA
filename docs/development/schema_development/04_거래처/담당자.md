# 거래처 담당자 관리

## 담당자 정보
1. 기본 정보
   - 담당자 ID
   - 이름
   - 직위
   - 연락처
   - 이메일

2. 소속 정보
   - 거래처
   - 부서
   - 담당 업무
   - 담당 지역

## DB 연계
```sql
-- 담당자 정보 테이블: 거래처 담당자의 기본 정보를 저장하는 테이블입니다.
-- 예: 담당자명, 직위, 연락처, 이메일 등 기본 정보를 관리합니다.
CREATE TABLE vendor_contacts (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),  -- 담당자의 고유 식별자
    vendor_id UUID REFERENCES vendors(id),           -- 거래처 ID
    name VARCHAR(100) NOT NULL,                      -- 담당자명
    position VARCHAR(100),                           -- 직위
    department VARCHAR(100),                         -- 부서
    phone VARCHAR(20),                               -- 연락처
    mobile VARCHAR(20),                              -- 휴대전화
    email VARCHAR(255),                              -- 이메일
    is_primary BOOLEAN DEFAULT FALSE,                -- 주요 담당자 여부
    status VARCHAR(20) DEFAULT 'active',             -- 상태 (활성/비활성/퇴사 등)
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,  -- 등록 일시
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP   -- 수정 일시
);

-- 담당 업무 테이블: 담당자의 담당 업무 정보를 저장하는 테이블입니다.
-- 예: 견적, 납품, 대금 지급, 기술 지원 등 담당 업무를 관리합니다.
CREATE TABLE contact_responsibilities (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),  -- 담당 업무의 고유 식별자
    contact_id UUID REFERENCES vendor_contacts(id),  -- 담당자 ID
    responsibility_type VARCHAR(50) NOT NULL,        -- 업무 유형 (견적/납품/지급 등)
    description TEXT,                                -- 업무 설명
    is_active BOOLEAN DEFAULT TRUE,                  -- 활성 여부
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,  -- 등록 일시
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP   -- 수정 일시
);

-- 담당자 이력 테이블: 담당자 정보의 변경 사항을 추적하는 테이블입니다.
-- 예: 연락처 변경, 직위 변경, 담당 업무 변경 등의 이력을 관리합니다.
CREATE TABLE contact_history (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),  -- 이력의 고유 식별자
    contact_id UUID REFERENCES vendor_contacts(id),  -- 담당자 ID
    change_type VARCHAR(50) NOT NULL,                -- 변경 유형 (수정/담당업무변경 등)
    previous_data JSONB,                             -- 변경 전 데이터
    new_data JSONB,                                  -- 변경 후 데이터
    changed_by UUID REFERENCES users(id),            -- 변경 수행자 ID
    changed_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP  -- 변경 일시
);
```

## 담당자 관리 기능
1. 담당자 등록
   - 기본 정보 입력
   - 소속 정보 입력
   - 담당 업무 설정
   - 연락처 정보 입력

2. 담당자 수정
   - 정보 업데이트
   - 담당 업무 변경
   - 상태 변경
   - 이력 관리

3. 담당자 조회
   - 기본 정보 조회
   - 담당 업무 조회
   - 연락처 조회
   - 이력 조회

## 담당자 연락 관리
1. 연락 기록
   - 연락 일시
   - 연락 방법
   - 연락 내용
   - 후속 조치

2. 일정 관리
   - 미팅 일정
   - 방문 일정
   - 평가 일정
   - 계약 일정

3. 문서 관리
   - 견적서
   - 계약서
   - 평가서
   - 기타 문서
